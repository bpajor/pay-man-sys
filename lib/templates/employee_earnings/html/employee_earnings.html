<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <link rel="stylesheet" href="../../common/css/header.css" />
    <link rel="stylesheet" href="../../common/css/footer.css" />
    <link rel="stylesheet" href="../../common/css/left-employee-nav.css" />
    <link rel="stylesheet" href="../../common/css/date-picker.css">
    <link rel="stylesheet" href="../css/styles.css" />
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <title>Document</title>
  </head>
  <body>
    <header class="header">
      <img
        src="../../common/images/brand.png"
        alt="PayrollPro Logo"
        class="logo"
      />
      <nav>
        <a href="">Home</a>
        <a href="">Features</a>
        <a href="">About</a>
        <a href="http://localhost:5500/lib/templates/login/html/login.html"
          >Logout</a
        >
      </nav>
    </header>
    <main>
      <secion class="menu">
        <div class="menu-item">
          <img
            src="../../common/images/user.png"
            alt="user_icon"
            class="user-icon"
          />
          <p>Employee Dashboard</p>
        </div>
        <div class="menu-item">
          <img
            src="../../common/images/user.png"
            alt="user_icon"
            class="user-icon"
          />
          <p>Employee Dashboard</p>
        </div>
        <div class="menu-item">
          <img
            src="../../common/images/user.png"
            alt="user_icon"
            class="user-icon"
          />
          <p>Employee Dashboard</p>
        </div>
        <div class="menu-item">
          <img
            src="../../common/images/user.png"
            alt="user_icon"
            class="user-icon"
          />
          <p>Employee Dashboard</p>
        </div>
      </secion>
      <section class="content">
        <div class="date-picker">
          <span class="date-arrow" onclick="prevMonth()">&#9664;</span>
          <span class="date-text" id="date-text"
            >01 January - 31 January 2024</span
          >
          <span class="date-arrow" onclick="nextMonth()">&#9654;</span>
        </div>
        <section class="summary-cards">
          <div class="payroll-card">
            <div class="payroll-title">This month</div>
            <div class="payroll-amount">$3.500</div>
            <div class="payroll-change">
              <span class="change-icon">&#9650;</span>
              <span class="change-percentage">20%</span>
              <span class="change-text">last month</span>
            </div>
          </div>
          <div class="payroll-card">
            <div class="payroll-title">Potential in this month</div>
            <div class="payroll-amount">$6000</div>
            <div class="payroll-change">
              <span class="change-icon">&#9650;</span>
              <span class="change-percentage">4%</span>
              <span class="change-text">last month</span>
            </div>
          </div>
          <div class="payroll-card">
            <div class="payroll-title">This year</div>
            <div class="payroll-amount">$15000</div>
            <div class="payroll-change">
              <span class="change-icon">&#9650;</span>
              <span class="change-percentage">2%</span>
              <span class="change-text">last year</span>
            </div>
          </div>
        </section>
        <div class="chart-card">
          <div class="chart-title">Payroll Cost Overview</div>
          <a href="">See details</a>
          <canvas id="payrollChart"></canvas>
          <div class="chart-details" id="chartDetails" style="display: none">
            <div class="details-title" id="detailsTitle">July 2024</div>
            <div class="details-item">
              <span class="details-label">Cost:</span>
              <span class="details-value" id="detailsCost">$8,740.00</span>
              <span class="details-change" id="detailsCostChange">51.3%</span>
            </div>
          </div>
        </div>
      </section>
    </main>
    <footer>
      <p>© 2024 PayrollPro. All rights reserved.</p>
    </footer>

    <script src="../../common/scripts/dates.js"></script>

    <script>
      const ctx = document.getElementById("payrollChart").getContext("2d");
      const payrollChart = new Chart(ctx, {
        type: "bar",
        data: {
          labels: [
            "Mar",
            "Apr",
            "May",
            "Jun",
            "Jul",
            "Aug",
            "Sep",
            "Oct",
            "Nov",
          ],
          datasets: [
            {
              label: "Cost",
              data: [3000, 5000, 9000, 6000, 8740, 4000, 7000, 8000, 11000],
              backgroundColor: "rgba(75, 192, 192, 0.2)",
              borderColor: "rgba(75, 192, 192, 1)",
              borderWidth: 1,
            },
          ],
        },
        options: {
          scales: {
            y: {
              beginAtZero: true,
            },
          },
          plugins: {
            tooltip: {
              enabled: false,
            },
          },
          onHover: (event, chartElement) => {
            const points = payrollChart.getElementsAtEventForMode(
              event,
              "nearest",
              { intersect: true },
              false
            );

            if (points.length) {
              const index = points[0].index;
              const month = payrollChart.data.labels[index];
              const cost = payrollChart.data.datasets[0].data[index];
              const costChange = "51.3%"; // Przykładowa wartość

              document.getElementById(
                "detailsTitle"
              ).textContent = `${month} 2024`;
              document.getElementById(
                "detailsCost"
              ).textContent = `$${cost.toLocaleString()}`;
              document.getElementById("detailsCostChange").textContent =
                costChange;

              document.getElementById("chartDetails").style.display = "block";
            } else {
              document.getElementById("chartDetails").style.display = "none";
            }
          },
        },
      });

      document.addEventListener("mousemove", (event) => {
        payrollChart.options.onHover(
          event,
          payrollChart.getElementsAtEventForMode(
            event,
            "nearest",
            { intersect: true },
            false
          )
        );
      });
    </script>
  </body>
</html>
